<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <h2>Task # 1. Спрячьте сообщения с помощью делегирования</h2>
  <div id="container">
    <div class="pane">
      <h3>Лошадь</h3>
      <p>Домашняя лошадь - животное семейства непарнокопытных, одомашненный и единственный сохранившийся подвид дикой
        лошади, вымершей в дикой природе, за исключением небольшой популяции лошади Пржевальского.</p>
      <button class="remove-button">[x]</button>
    </div>
    <div class="pane">
      <h3>Осёл</h3>
      <p>Домашний осёл или ишак — одомашненный подвид дикого осла, сыгравший важную историческую роль в развитии
        хозяйства и культуры человека. Все одомашненные ослы относятся к африканским ослам.</p>
      <button class="remove-button">[x]</button>
    </div>
    <div class="pane">
      <h3>Кошка</h3>
      <p>Кошка, или домашняя кошка (лат. Félis silvéstris cátus), — домашнее животное, одно из наиболее популярных
        (наряду с собакой) "животных-компаньонов". С точки зрения научной систематики, домашняя кошка — млекопитающее
        семейства кошачьих отряда хищных. Ранее домашнюю кошку нередко рассматривали как отдельный биологический вид.
      </p>
      <button class="remove-button">[x]</button>
    </div>
  </div>

  <script>
    document.addEventListener('click', (event) => {
      let item = event.target.closest('div.pane');
      if (event.target.className !== 'remove-button') return;

      item.remove();
    })
  </script>


  <code>
    document.addEventListener('click', (event) => {
      let item = event.target.closest('div.pane');
      if (event.target.className !== 'remove-button') return;

      item.remove();
    })
</code>

  <hr>


  <h2>Task # 2. Раскрывающееся дерево</h2>
  <ul class="tree" id="tree">
    <li>Животные
      <ul>
        <li>Млекопитающие
          <ul>
            <li>Коровы</li>
            <li>Ослы</li>
            <li>Собаки</li>
            <li>Тигры</li>
          </ul>
        </li>
        <li>Другие
          <ul>
            <li>Змеи</li>
            <li>Птицы</li>
            <li>Ящерицы</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>Рыбы
      <ul>
        <li>Аквариумные
          <ul>
            <li>Гуппи</li>
            <li>Скалярии</li>
          </ul>
        </li>
        <li>Морские
          <ul>
            <li>Морская форель</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <script>
    function wrap(li, className) {
      const wrapper = document.createElement('span');
      wrapper.classList = className;

      li.prepend(wrapper);
      wrapper.append(wrapper.nextSibling);
    }

    tree.querySelectorAll('li').forEach(li => {
      wrap(li, 'tree-li')
    });

    tree.addEventListener(`click`, (evt) => {
      if (evt.target.tagName !== `SPAN`) return;
      const childUl = evt.target.parentNode.querySelector(`ul`);

      if (childUl) childUl.hidden = !childUl.hidden;
    });
  </script>


  <code>
    function wrap(li, className) {
      const wrapper = document.createElement('span');
      wrapper.classList = className;

      li.prepend(wrapper);
      wrapper.append(wrapper.nextSibling);
    }

    tree.querySelectorAll('li').forEach(li => {
      wrap(li, 'tree-li')
    });

    tree.addEventListener(`click`, (evt) => {
      if (evt.target.tagName !== `SPAN`) return;
      const childUl = evt.target.parentNode.querySelector(`ul`);

      if (childUl) childUl.hidden = !childUl.hidden;
    });
</code>

  <hr>


  <h2>Task # 3. Сортируемая таблица</h2>
  <table id="grid">
    <thead>
      <tr>
        <th data-type="age">Возраст</th>
        <th data-type="name">Имя</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>5</td>
        <td>Вася</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Петя</td>
      </tr>
      <tr>
        <td>12</td>
        <td>Женя</td>
      </tr>
      <tr>
        <td>9</td>
        <td>Маша</td>
      </tr>
      <tr>
        <td>1</td>
        <td>Илья</td>
      </tr>
    </tbody>
    <button id="reset">Reset sort</button>
  </table>


  <script>

    document.addEventListener("click", (event) => {
      const sortRow = event.target.dataset.type;
      let tableRows = grid.rows;

      if (sortRow === 'age') {
        Array.from(tableRows).sort((a, b) => a.cells[0].textContent - b.cells[0].textContent)
          .forEach(tr => grid.appendChild(tr));
      }

      if (sortRow === 'name') {
        Array.from(tableRows).sort((a, b) => {
          console.log(a.cells[2].textContent)
          a.cells[1].textContent.localCompare(b.cells[1].textContent, 'ru', { sensitivity: 'base' })
        })
          .forEach(tr => grid.appendChild(tr));
      }

      reset.addEventListener("click", () => tableRows = Array.from(tableRows).forEach(tr => grid.appendChild(tr)));

    });
  </script>


  <code>

</code>

  <hr>


  <h2>Task # 4. Поведение "подсказка"</h2>
  <p>ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя</p>
  <p>ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя</p>

  <button data-tooltip="эта подсказка должна быть длиннее, чем элемент">Короткая кнопка</button>
  <button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>

  <p>Прокрутите страницу, чтобы кнопки оказались у верхнего края, а затем проверьте правильно ли выводятся подсказки.
  </p>

  <script>
    document.addEventListener('mouseover', (event) => {
      const tooltip = event.target.dataset.tooltip;
      const coords = event.target.getBoundingClientRect();

      if (tooltip) {
        const p = document.createElement('p');
        p.innerHTML = tooltip;
        console.log(p);
        event.target.style.position = 'relative';
        p.classList.add('p-tooltip');
      }
    });
  </script>


  <code>

</code>

  <hr>

</body>

</html>